---- RMAN RECOVERY PROGRESS MONITOR QUERY ----

REM RMAN Progress
alter session set nls_date_format='dd/mm/yy hh24:mi:ss';

REM Status of RMAN Jobs 
select SID, START_TIME,TOTALWORK, sofar, (sofar/totalwork) * 100 done,
sysdate + TIME_REMAINING/3600/24 end_at
from v$session_longops
where totalwork > sofar
AND opname NOT LIKE '%aggregate%'
AND opname like 'RMAN%';

REM RMAN waits and how many channels allocated 
set lines 120
column sid format 9999
column spid format a10
column client_info format a25
col event for a30
column secs format 9999
SELECT SID, SPID, CLIENT_INFO, event, seconds_in_wait secs, p1, p2, p3
  FROM V$PROCESS p, V$SESSION s
  WHERE p.ADDR = s.PADDR
  and CLIENT_INFO like 'rman channel=%';
  
  
 Restore archivelogs to a different locations from tape - 
 --------------------------------------------------------
  
 wiki - https://confluence.oraclecorp.com/confluence/pages/viewpage.action?pageId=3206927664


run {
set archivelog destination to '/u02/app/oracle/diag/arcrestore';
ALLOCATE CHANNEL C1_SBT DEVICE TYPE 'SBT_TAPE' PARMS 'SBT_LIBRARY=/var/opt/oracle/dbaas_acfs/us2gm5ac/opc/libopc.so,ENV=(OPC_PFILE=/var/opt/oracle/dbaas_acfs/us2gm5ac/opc/opcus2gm5ac.ora)';
configure device type disk parallelism 2 ;
restore archivelog sequence 5011 thread 10;
restore archivelog sequence 5012 thread 10;
release channel C1_SBT;
}
  
